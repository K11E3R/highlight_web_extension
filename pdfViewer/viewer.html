<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Viewer - Persistent Highlighter</title>
  <link rel="stylesheet" href="viewer.css">
  <!-- PDF.js (local) -->
  <script src="pdf.min.js"></script>
</head>
<body>
  <!-- Toolbar -->
  <div id="toolbar">
    <div class="toolbar-left">
      <button id="prevPage" title="Previous Page (â†)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <span id="pageInfo">
        <label for="pageInput" class="sr-only">Page Number</label>
        <input 
          type="number" 
          id="pageInput" 
          min="1" 
          value="1" 
          title="Go to page"
          aria-label="Page Number"
        >
        <span>/</span>
        <span id="totalPages">-</span>
      </span>
      <button id="nextPage" title="Next Page (â†’)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    </div>
    
    <div class="toolbar-center">
      <span id="fileName" title=""></span>
    </div>
    
    <div class="toolbar-right">
      <button id="zoomOut" title="Zoom Out (Ctrl+-)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          <line x1="8" y1="11" x2="14" y2="11"></line>
        </svg>
      </button>
      <span id="zoomLevel">100%</span>
      <button id="zoomIn" title="Zoom In (Ctrl++)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          <line x1="11" y1="8" x2="11" y2="14"></line>
          <line x1="8" y1="11" x2="14" y2="11"></line>
        </svg>
      </button>
      <button id="fitWidth" title="Fit Width">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="9" y1="3" x2="9" y2="21"></line>
          <line x1="15" y1="3" x2="15" y2="21"></line>
        </svg>
      </button>
      <button id="openOriginal" title="Open Original PDF">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
          <polyline points="15 3 21 3 21 9"></polyline>
          <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
      </button>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <p>Loading PDF...</p>
      <p id="loadingProgress">0%</p>
    </div>
  </div>

  <!-- Error Overlay -->
  <div id="errorOverlay" class="hidden">
    <div class="error-content">
      <div class="error-icon">ðŸ“„</div>
      <h2>Failed to Load PDF</h2>
      <p id="errorMessage">Unknown error occurred</p>
      <div>
        <button id="retryBtn">Try Again</button>
        <button id="openOriginalError">Open Original</button>
      </div>
    </div>
  </div>

  <!-- PDF Container -->
  <div id="viewerContainer">
    <div id="viewer"></div>
  </div>

  <!-- Highlight Toolbar (appears on selection) -->
  <div id="highlightToolbar" class="hidden">
    <button class="highlight-btn" data-color="#ffd43b" title="Yellow">
      <span class="color-dot" style="background: #ffd43b;"></span>
    </button>
    <button class="highlight-btn" data-color="#51cf66" title="Green">
      <span class="color-dot" style="background: #51cf66;"></span>
    </button>
    <button class="highlight-btn" data-color="#4dabf7" title="Blue">
      <span class="color-dot" style="background: #4dabf7;"></span>
    </button>
    <button class="highlight-btn" data-color="#9775fa" title="Purple">
      <span class="color-dot" style="background: #9775fa;"></span>
    </button>
    <button class="highlight-btn" data-color="#ff6ba7" title="Pink">
      <span class="color-dot" style="background: #ff6ba7;"></span>
    </button>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="hidden"></div>

  <script src="viewer.js"></script>
</body>
</html>
